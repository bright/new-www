{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/frame-video-view","result":{"data":{"markdownRemark":{"html":"<p>VideoView is the most straightforward way to show video content in layout. <br />\nIt took a few lines of code to setup and show for example mp4 file. <br />\nIt's fine when you don't care about UX too much, but when you do, things are going to be annoying.\nWhen you tested app for different cases like: change device orientation, swipe the view, lock screen or go to home screen and back to the app, you probably know what I'm talking about. <br />\nIf you don't, take a look at: <br /><br />\n<a href=\"http://stackoverflow.com/questions/9765629/android-videoview-black-screen\">VideoView Black Screen</a> <br />\n<a href=\"http://stackoverflow.com/questions/4343350/videoview-black-flash-before-and-after-playing?lq=1\">VideoView Black Flash Before and After Playing</a> <br />\n<a href=\"http://stackoverflow.com/questions/17717906/videoview-inside-fragment-causes-black-screen-flicking?lq=1\">VideoView Inside Fragment Causes Black Screen Flickering</a> <br />\n<a href=\"http://stackoverflow.com/questions/17587476/videoview-flickering-issue?lq=1\">VideoView Flickering Issue</a> <br /></p>\n<h1>Workaround</h1>\n<p>To deal with these problems we can use 'placeholder solution' described in the above links. <br />\nThe idea is to show placeholder, which has the same color as video background, when <code>VideoView</code> is not ready to show the content yet. When <code>VideoView</code> is ready the placeholder will go away and already prepared video will be revealed without any issues. <br />\nThereby we achieve nice solid experience, because user doesn't see how system prepares video to render it, which causes <code>VideoView</code> displays black screen or the content flickering. If you want to observe these issues try to move the app to the background (by pressing home screen button) and bring back the app to the foreground. <br />\nIf it still seems to work well, try it a couple of times... it will happen ;)</p>\n<h1>FrameVideoView</h1>\n<p><code>FrameVideoView</code> is a class which implements 'placeholder workaround' dynamically by creating views in runtime. You don't have to create additional layout for placeholder and put <code>VideoView</code> in there nor have you to take care about showing and hiding placeholder in an appropriate time. <code>FrameVideoView</code> does it for you. <br />\nIf device is running API level 13 or below, <a href=\"https://developer.android.com/reference/android/widget/VideoView.html\"><code>VideoView</code></a> will be used to show video content. This approach should fix most of the flickering and black screen issues. <br />\nFor devices running API level 14 or higher, <a href=\"https://developer.android.com/reference/android/view/TextureView.html\"><code>TextureView</code></a> will be used to show video content. It provides a lot better performance than <code>VideoView</code> implementation because it was created to show 'stream content' like video or OpenGL scenes. <br /> <br />\nI wrote <a href=\"https://play.google.com/store/apps/details?id=com.everytap&#x26;hl=en\">app</a> with <code>ViewPager</code> where each of three fragments has different video and are playing simultaneously. When <code>FrameVideoView</code> used <code>VideoView</code> implementation there were problems because sometimes black screen issues appeared again when swiping. There was also the problem when user swiped to the last page and <code>ViewPager</code> showed overscroll animation that can't overlay <code>VideoView</code>. When <code>TextureView</code> implementation was used all problems were gone and app worked as expected.</p>\n<h1>How to use it?</h1>\n<p>Add <code>FrameVideoView</code> to layout:</p>\n<pre><code class=\"language-xml\">  &#x3C;mateuszklimek.framevideoview.FrameVideoView\n    android:id=\"@+id/frame_video_view\"\n    android:layout_width=\"@dimen/video_width\"\n    android:layout_height=\"@dimen/video_height\"\n  />\n</code></pre>\n<p>find its instance in <code>Activity</code> and call corresponding methods in <code>onResume</code> and <code>onPause</code>:</p>\n<pre><code class=\"language-java\">public class SampleActivity extends Activity {\n\n  private FrameVideoView videoView;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.simple);\n\n    String uriString = \"android.resource://\" + getPackageName() + \"/\" + R.raw.movie;\n    videoView = (FrameVideoView) findViewById(R.id.frame_video_view);\n    videoView.setup(Uri.parse(uriString), Color.GREEN);\n  }\n\n    @Override\n    protected void onResume() {\n      super.onResume();\n      videoView.onResume();\n    }\n\n    @Override\n    protected void onPause() {\n      videoView.onPause();\n      super.onPause();\n    }\n  }\n</code></pre>\n<p>If you want to execute method for particular implementation eg. <code>seekTo()</code> from <code>VideoView</code> you can call it like that:</p>\n<pre><code class=\"language-java\">  frameVideoView.asVideoView().seekTo(x);\n</code></pre>\n<p>but before, it's better to check what type of implementation is used:</p>\n<pre><code class=\"language-java\">if(videoView.getImplType() == VIDEO_VIEW){\n    frameVideoView.asVideoView().seekTo(x);\n}\n</code></pre>\n  <br />\n  I uploaded project to [github](https://github.com/mklimek/FrameVideoView) so you can run example app and see full implementation of `FrameVideoView`. Feel free to use it as you like.\n  <br />\n<p>  See this post on my <a href=\"http://mklimek.github.io/frame-video-view/\">personal blog</a>.</p>","excerpt":"VideoView is the most straightforward way to show video content in layout. \nIt took a few lines of code to setup and show for example mpâ€¦","frontmatter":{"slug":null,"title":"How to avoid flickering and black screen issues when using VideoView?","description":null,"author":"mateuszklimek","tags":["android","videoview"],"date":"2015-01-10T23:00:00.000Z","image":null},"timeToRead":3,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-01-11-frame-video-view.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-01-11-frame-video-view.md"}},"staticQueryHashes":["2189233960","3181594896"]}